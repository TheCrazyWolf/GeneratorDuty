using GeneratorDuty.Common;
using GeneratorDuty.Database;
using GeneratorDuty.Models;
using GeneratorDuty.Services;
using Microsoft.EntityFrameworkCore;
using Telegram.Bot;
using Telegram.Bot.Types;
using Telegram.Bot.Types.Enums;

namespace GeneratorDuty.Commands;

public class StartCommand() : BaseCommand
{
    public override string Command { get; } = "/start";

    public override async Task ExecuteAsync(ITelegramBotClient client, Message message)
    {
        if (string.IsNullOrEmpty(message.Text) || message.From is null) return;

        string startMessage = "ü§©ü•∏üòõüòù –ü—Ä–∏–≤–µ—Ç! –ú–æ–π –±–æ—Ç —É–º–µ–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –≤ –±–µ—Å–µ–¥—É –∏ –∫–æ–Ω—Ç—Ä–æ–ª–ª–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è. –ù–£ –µ—â–µ –µ—Å—Ç—å —Ä–∞–Ω–¥–æ–º–∞–π–∑–µ—Ä –¥–µ–∂—É—Ä–Ω—ã—Ö\n\n" +
                              "<b>–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≥—Ä—É–ø–ø—ã –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ä–∞—Å—Å—ã–ª–∫–∏:</b> \n\n" +
                              "1. /set –ò–°-23-01 –∏–ª–∏ /set –§–ò–û –ø–µ–¥–∞–≥–æ–≥–∞\n" +
                              "2. /auto true - –≤–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ —Ä–∞—Å—Å—ã–ª–∫—É, /auto false - –≤—ã–∫–ª—é—á–∏—Ç—å\n\n" +
                              "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–ø–∏—Å–∫–∞ –¥–µ–∂—É—Ä–Ω—ã:" +
                              "1. /update –§–∞–º–∏–ª–∏—è –ò.–û. (–ø–µ—Ä–µ–Ω–æ—Å —Å—Ç—Ä–æ–∫–∏ –¥–ª—è —Å–ª–µ–¥. –æ–±—ä–µ–∫—Ç –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω)\n" +
                              "–§–∞–º–∏–ª–∏—è –ò.–û. –∏ —Ç.–¥. \n" +
                              "2. –í—ã–±—Ä–∞—Ç—å –¥–µ–∂—É—Ä–Ω–æ–≥–æ /get\n\n" +
                              "üçª –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∫–æ–º–∞–Ω–¥—É —Ç–æ–ª—å–∫–æ –≤ —Ç—É –±–µ—Å–µ–¥—É, –≥–¥–µ –±—É–¥—É—Ç –∑–∞–∫—Ä–µ–ø–ª—è—Ç—å—Å—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∏–ª–∏ –¥–µ–∂—É—Ä–Ω—ã–µ\n\n" +
                              "–†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –∫–æ—Å—Ç—ã–ª—è—Ö, —Ç–∞–∫ –∫–∞–∫ –Ω–∞–ø–∏—Å–∞–Ω–æ –Ω–∞ —á–∏—Å—Ç–æ–º —ç–Ω—Ç—É–∑–∏–∞–∑–º–µ. –°—É—Ä—Å—ã –Ω–∞–π—Ç–∏ —Å–º–æ–∂–µ—Ç–µ –Ω–∞ –≥–∏—Ç—Ö–∞–±–µ";
        
        try
        {
            await client.SendTextMessageAsync(message.Chat.Id, startMessage, parseMode: ParseMode.Html);
        }
        catch (Exception e)
        {
            Console.WriteLine(e);
        }
    }
}